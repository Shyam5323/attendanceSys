<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Face Attendance System | Admin Portal</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="./css/style.css" />
  </head>

  <body>
    <div class="app-container">
      <!-- Login Section -->
      <div class="auth-container" id="loginContainer">
        <div class="auth-card">
          <div class="auth-header">
            <img
              src="https://via.placeholder.com/80"
              alt="Logo"
              class="auth-logo"
            />
            <h1>Attendance Portal</h1>
            <p>Administrator Access</p>
          </div>
          <form id="loginForm" class="auth-form">
            <div class="input-group">
              <label for="loginEmail">Email</label>
              <div class="input-with-icon">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="loginEmail"
                  placeholder="admin@university.edu"
                  required
                />
              </div>
            </div>
            <div class="input-group">
              <label for="loginPassword">Password</label>
              <div class="input-with-icon">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="loginPassword"
                  placeholder="••••••••"
                  required
                />
                <button type="button" class="password-toggle">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </div>
            <button type="submit" id="loginBtn" class="btn-primary">
              <span id="loginText">Sign In</span>
              <span id="loginSpinner" class="spinner"></span>
            </button>
            <div id="loginError" class="error-message"></div>
          </form>
          <div class="auth-toggle">
            <p>
              Don't have an account?
              <a href="#" id="showRegisterFormBtn">Sign Up</a>
            </p>
          </div>
          <!-- Add an admin registration form (initially hidden) -->
          <form id="adminRegisterForm" class="auth-form" style="display: none">
            <div class="input-group">
              <label for="registerEmail">Email</label>
              <div class="input-with-icon">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="registerEmail"
                  placeholder="faculty@university.edu"
                  required
                />
              </div>
            </div>
            <div class="input-group">
              <label for="registerName">Name</label>
              <div class="input-with-icon">
                <i class="fas fa-user"></i>
                <input
                  type="text"
                  id="registerName"
                  placeholder="Professor Smith"
                  required
                />
              </div>
            </div>
            <div class="input-group">
              <label for="registerDept">Department</label>
              <div class="input-with-icon">
                <i class="fas fa-building"></i>
                <input
                  type="text"
                  id="registerDept"
                  placeholder="Computer Science"
                  required
                />
              </div>
            </div>
            <div class="input-group">
              <label for="registerPassword">Password</label>
              <div class="input-with-icon">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="registerPassword"
                  placeholder="••••••••"
                  required
                />
                <button type="button" class="password-toggle">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </div>
            <div class="input-group">
              <label for="confirmPassword">Confirm Password</label>
              <div class="input-with-icon">
                <i class="fas fa-lock"></i>
                <input
                  type="password"
                  id="confirmPassword"
                  placeholder="••••••••"
                  required
                />
              </div>
            </div>
            <button type="submit" id="registerAdminBtn" class="btn-primary">
              <span id="registerAdminText">Sign Up</span>
              <span id="registerAdminSpinner" class="spinner"></span>
            </button>
            <div id="registerAdminError" class="error-message"></div>
            <div class="auth-toggle">
              <p>
                Already have an account?
                <a href="#" id="showLoginFormBtn">Sign In</a>
              </p>
            </div>
          </form>
          <div class="auth-footer">
            <p>Need help? <a href="#">Contact support</a></p>
          </div>
        </div>
        <div class="auth-background">
          <div class="background-overlay"></div>
          <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
          </div>
        </div>
      </div>

      <!-- Main App Content -->
      <div class="main-container" id="appContent">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
          <div class="sidebar-header">
            <img
              src="https://via.placeholder.com/40"
              alt="Logo"
              class="sidebar-logo"
            />
            <h2>Face Attendance</h2>
          </div>
          <div class="sidebar-user">
            <div class="user-avatar">
              <i class="fas fa-user-circle"></i>
            </div>
            <div class="user-info">
              <span id="userEmail">admin@university.edu</span>
              <span class="user-role">Faculty</span>
            </div>
          </div>
          <nav class="sidebar-nav">
            <ul>
              <li class="nav-item active" data-tab="register">
                <i class="fas fa-user-plus"></i>
                <span>Register</span>
              </li>
              <li class="nav-item" data-tab="attendance">
                <i class="fas fa-calendar-check"></i>
                <span>Attendance</span>
              </li>
              <li class="nav-item" data-tab="reports">
                <i class="fas fa-chart-bar"></i>
                <span>Reports</span>
              </li>
              <li class="nav-item" data-tab="settings">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
              </li>
            </ul>
          </nav>
          <div class="sidebar-footer">
            <button id="logoutBtn" class="btn-logout">
              <i class="fas fa-sign-out-alt"></i>
              <span>Logout</span>
            </button>
          </div>
        </aside>

        <!-- Main Content Area -->
        <main class="content-area">
          <header class="content-header">
            <h1 id="contentTitle">Student Registration</h1>
            <div class="header-actions">
              <div class="notification-bell">
                <i class="fas fa-bell"></i>
                <span class="notification-badge">3</span>
              </div>
              <div class="quick-actions">
                <button class="btn-icon">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
            </div>
          </header>

          <div class="content-wrapper">
            <!-- Registration Tab -->
            <div id="register" class="tab-content active">
              <div class="card">
                <div class="card-header">
                  <h2>Register New Student</h2>
                  <p>Capture facial data and student information</p>
                </div>
                <div class="card-body">
                  <form id="registerForm" class="form-grid">
                    <div class="form-group">
                      <label for="studentId">Student ID</label>
                      <input
                        type="text"
                        id="studentId"
                        placeholder="STU2023001"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label for="name">Full Name</label>
                      <input
                        type="text"
                        id="name"
                        placeholder="John Doe"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label for="regEmail">Email</label>
                      <input
                        type="email"
                        id="regEmail"
                        placeholder="student@university.edu"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label for="department">Department</label>
                      <select id="department" required>
                        <option value="">Select Department</option>
                        <option value="CS">Computer Science</option>
                        <option value="EE">Electrical Engineering</option>
                        <option value="ME">Mechanical Engineering</option>
                      </select>
                    </div>

                    <div class="form-group full-width">
                      <div class="camera-container">
                        <div class="camera-header">
                          <h3>Facial Capture</h3>
                          <div class="camera-actions">
                            <button
                              type="button"
                              id="switchCameraBtn"
                              class="btn-icon small"
                            >
                              <i class="fas fa-camera-retro"></i>
                            </button>
                          </div>
                        </div>
                        <div class="camera-box">
                          <video
                            id="registerVideo"
                            width="640"
                            height="480"
                            autoplay
                            muted
                          ></video>
                          <canvas
                            id="registerCanvas"
                            width="640"
                            height="480"
                            style="display: none"
                          ></canvas>
                          <div class="camera-overlay"></div>
                        </div>
                        <button
                          type="button"
                          id="captureBtn"
                          class="btn-secondary"
                        >
                          <i class="fas fa-camera"></i>
                          <span>Capture Photo</span>
                        </button>
                      </div>
                    </div>

                    <div class="form-group full-width">
                      <button
                        type="submit"
                        id="registerBtn"
                        class="btn-primary"
                      >
                        <span id="registerText">Register Student</span>
                        <span id="registerSpinner" class="spinner"></span>
                      </button>
                    </div>
                  </form>
                  <div id="registerResult" class="result-message"></div>
                </div>
              </div>
            </div>

            <!-- Attendance Tab -->
            <div id="attendance" class="tab-content">
              <div class="card">
                <div class="card-header">
                  <h2>Mark Attendance</h2>
                  <p>Real-time face recognition for attendance</p>
                </div>
                <div class="card-body">
                  <div class="form-group">
                    <label for="timeSlot">Session</label>
                    <select id="timeSlot">
                      <option value="morning">Morning (9:00 AM)</option>
                      <option value="afternoon">Afternoon (2:00 PM)</option>
                      <option value="evening">Evening (5:00 PM)</option>
                    </select>
                  </div>

                  <div class="camera-container">
                    <div class="camera-box live-recognition">
                      <video
                        id="attendanceVideo"
                        width="640"
                        height="480"
                        autoplay
                        muted
                      ></video>
                      <canvas
                        id="attendanceCanvas"
                        width="640"
                        height="480"
                        style="display: none"
                      ></canvas>
                      <div class="recognition-feedback">
                        <div class="recognition-status">
                          <i class="fas fa-user"></i>
                          <span>Ready for recognition</span>
                        </div>
                        <div class="recognition-timer">
                          <span>00:00</span>
                        </div>
                      </div>
                    </div>
                    <div class="attendance-stats">
                      <div class="stat-card">
                        <i class="fas fa-users"></i>
                        <div>
                          <span class="stat-value" id="totalStudents">0</span>
                          <span class="stat-label">Total Students</span>
                        </div>
                      </div>
                      <div class="stat-card">
                        <i class="fas fa-user-check"></i>
                        <div>
                          <span class="stat-value" id="presentStudents">0</span>
                          <span class="stat-label">Present Today</span>
                        </div>
                      </div>
                      <div class="stat-card">
                        <i class="fas fa-percentage"></i>
                        <div>
                          <span class="stat-value" id="attendancePercentage"
                            >0%</span
                          >
                          <span class="stat-label">Attendance Rate</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="attendanceResult" class="result-message"></div>
                </div>
              </div>
            </div>

            <!-- Reports Tab -->
            <div id="reports" class="tab-content">
              <div class="card">
                <div class="card-header">
                  <h2>Attendance Reports</h2>
                  <p>Generate and export attendance records</p>
                </div>
                <div class="card-body">
                  <form id="reportForm" class="form-grid">
                    <div class="form-group">
                      <label for="startDate">Start Date</label>
                      <input type="date" id="startDate" required />
                    </div>
                    <div class="form-group">
                      <label for="endDate">End Date</label>
                      <input type="date" id="endDate" required />
                    </div>
                    <div class="form-group">
                      <label for="reportDept">Department</label>
                      <select id="reportDept">
                        <option value="all">All Departments</option>
                        <option value="CS">Computer Science</option>
                        <option value="EE">Electrical Engineering</option>
                        <option value="ME">Mechanical Engineering</option>
                      </select>
                    </div>
                    <div class="form-group full-width">
                      <button
                        type="submit"
                        id="generateReportBtn"
                        class="btn-primary"
                      >
                        <span id="generateReportText">Generate Report</span>
                        <span id="generateReportSpinner" class="spinner"></span>
                      </button>
                    </div>
                  </form>

                  <div class="report-visualization">
                    <div class="chart-container">
                      <canvas id="attendanceChart"></canvas>
                    </div>
                    <div class="report-summary">
                      <h3>Summary Statistics</h3>
                      <div class="summary-grid">
                        <div class="summary-item">
                          <span class="summary-value" id="totalRecords">0</span>
                          <span class="summary-label">Total Records</span>
                        </div>
                        <div class="summary-item">
                          <span class="summary-value" id="avgAttendance"
                            >0%</span
                          >
                          <span class="summary-label">Average Attendance</span>
                        </div>
                        <div class="summary-item">
                          <span class="summary-value" id="topDepartment"
                            >-</span
                          >
                          <span class="summary-label">Best Department</span>
                        </div>
                        <div class="summary-item">
                          <span class="summary-value" id="mostPresent">-</span>
                          <span class="summary-label"
                            >Most Present Student</span
                          >
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="table-container">
                    <table id="reportTable">
                      <thead>
                        <tr>
                          <th>Student ID</th>
                          <th>Name</th>
                          <th>Department</th>
                          <th>Date</th>
                          <th>Status</th>
                          <th>Session</th>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- Data will be populated here -->
                      </tbody>
                    </table>
                  </div>

                  <div class="report-actions">
                    <button id="exportBtn" class="btn-secondary">
                      <i class="fas fa-file-export"></i>
                      <span>Export as CSV</span>
                    </button>
                    <button id="printBtn" class="btn-secondary">
                      <i class="fas fa-print"></i>
                      <span>Print Report</span>
                    </button>
                  </div>

                  <div id="reportResult" class="result-message"></div>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- Load libraries -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./js/face-api.min.js"></script>
    <script src="./js/app.js"></script>
  </body>
</html>
